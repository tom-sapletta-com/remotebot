# test_scenarios/test_firefox_simple.yaml - Test Firefox z prostym klikaniem pozycji

# Konfiguracja połączenia
connection:
  protocol: vnc
  host: vnc-desktop
  port: 5901
  username: ""
  password: automation

# Konfiguracja Ollama
ollama:
  url: http://ollama:11434
  model: llava:7b

# Scenariusze testowe
scenarios:
  
  # Test Firefox - z użyciem click_position (bez AI)
  test_firefox_simple:
    - action: connect
    - action: wait
      seconds: 3
    # Firefox jest zwykle w top-left na pulpicie XFCE
    - action: click_position
      position: "top-left"
    - action: wait
      seconds: 1
    # Jeśli to nie Firefox, spróbuj podwójnego kliknięcia
    - action: click_position
      position: "top-left"
    - action: wait
      seconds: 5
    - action: verify
      expected: "Firefox browser window is visible"
    - action: key
      key: ctrl+l
    - action: type
      text: "https://example.com"
    - action: key
      key: enter
    - action: wait
      seconds: 4
    - action: verify
      expected: "Example Domain webpage is displayed"
    - action: analyze
      question: "What is the main heading text on this webpage?"
      save_to: page_heading
    - action: disconnect

  # Test Firefox - z użyciem find_and_click (AI Vision)
  test_firefox_ai:
    - action: connect
    - action: wait
      seconds: 3
    - action: find_and_click
      element: "Firefox browser icon on desktop"
    - action: wait
      seconds: 5
    - action: verify
      expected: "Firefox browser window is open"
    - action: disconnect
  
  # Debug - tylko sprawdź co widzi AI
  test_debug_screen:
    - action: connect
    - action: wait
      seconds: 2
    - action: analyze
      question: "Describe everything you see on this screen in detail. What applications, icons, or UI elements are visible?"
      save_to: screen_description
    - action: disconnect
  
  # Debug z wieloma screenshotami - obserwuj desktop przez 10 sekund
  test_debug_screenshots:
    - action: connect
    - action: screenshot
      name: "initial_desktop"
    - action: wait
      seconds: 1
    - action: screenshot
      name: "desktop_1s"
    - action: wait
      seconds: 1
    - action: screenshot
      name: "desktop_2s"
    - action: wait
      seconds: 1
    - action: screenshot
      name: "desktop_3s"
    - action: wait
      seconds: 1
    - action: screenshot
      name: "desktop_4s"
    - action: wait
      seconds: 1
    - action: screenshot
      name: "desktop_5s"
    - action: analyze
      question: "List all visible icons, buttons, and UI elements you can see on this desktop screen."
      save_to: desktop_elements
    - action: disconnect
